---
created: 2025-11-30
updated: 2025-11-30
status: ready
version: 0.2.1
---

# Rackarr — Todo Checklist (v0.2.1)

**Generated:** 2025-11-30
**Version:** 0.2.1 (Design Polish)
**Prompt Plan:** v0.2.1-prompt_plan.md
**Reference:** design-review-spec.md

---

## Quick Reference

| Phase | Focus                   | Prompts            | Priority        |
| ----- | ----------------------- | ------------------ | --------------- |
| 0     | Design Token Foundation | 0.1, 0.2           | P3 (Foundation) |
| 1     | Drag Affordance         | 1.1, 1.2, 1.3      | P0              |
| 2     | Interaction States      | 2.1, 2.2, 2.3      | P1              |
| 3     | Tooltip System          | 3.1, 3.2           | P1              |
| 4     | Accessibility           | 4.1, 4.2, 4.3, 4.4 | P1              |
| 5     | Visual Polish           | 5.1, 5.2           | P2              |
| 6     | Animation System        | 6.1, 6.2           | P2              |
| 7     | Final Integration       | 7.1, 7.2           | P2              |

---

## Pre-Implementation Checklist

- [ ] v0.2 codebase is stable
- [ ] All v0.2 tests pass
- [ ] design-review-spec.md reviewed
- [ ] design-methodology.md available for reference
- [ ] Development environment ready
- [ ] Git branch created for v0.2.1

---

## Phase 0: Design Token Foundation

### Prompt 0.1 — Design Token System

**Status:** ⬜ Pending

#### Files to Create/Modify

- [ ] `src/lib/styles/tokens.css` (new)

#### Layer 1: Primitives

- [ ] Spacing scale defined (--space-0 through --space-12)
- [ ] Neutral colors defined (--neutral-50 through --neutral-950)
- [ ] Blue/primary colors defined (--blue-50 through --blue-900)
- [ ] Red/error colors defined (--red-50, --red-500, --red-600, --red-700)
- [ ] Green/success colors defined (--green-50, --green-500, --green-600)
- [ ] Amber/warning colors defined (--amber-50, --amber-500, --amber-600)
- [ ] Typography scale defined (--font-size-xs through --font-size-xl)
- [ ] Font weights defined (--font-weight-normal through --font-weight-bold)
- [ ] Line heights defined (--line-height-tight, normal, relaxed)
- [ ] Border radii defined (--radius-sm through --radius-full)
- [ ] Shadows defined (--shadow-sm through --shadow-xl)
- [ ] Timing/durations defined (--duration-instant through --duration-slow)
- [ ] Easing functions defined (--ease-linear through --ease-spring)

#### Layer 2: Semantic Tokens (Dark Theme)

- [ ] Background colors defined (--colour-bg, --colour-surface, etc.)
- [ ] Text colors defined (--colour-text, --colour-text-muted, etc.)
- [ ] Border colors defined (--colour-border, --colour-border-hover, etc.)
- [ ] Interactive colors defined (--colour-selection, --colour-focus-ring, etc.)
- [ ] Semantic colors defined (--colour-success, --colour-warning, --colour-error)
- [ ] DnD colors defined (--colour-dnd-valid, --colour-dnd-invalid, etc.)

#### Layer 3: Component Tokens

- [ ] Rack tokens defined (--rack-u-height, --rack-width, etc.)
- [ ] Toolbar tokens defined (--toolbar-height, --toolbar-bg, etc.)
- [ ] Drawer tokens defined (--drawer-width, --drawer-bg)
- [ ] Device tokens defined (--device-font-size, --device-padding, etc.)
- [ ] Toast tokens defined (--toast-bg, --toast-border, --toast-radius)

#### Light Theme

- [ ] Light theme overrides in [data-theme='light'] selector
- [ ] All semantic tokens overridden for light mode
- [ ] Shadows adjusted for lighter appearance

#### Tests

- [ ] Test: "CSS custom properties are defined for all primitives"
- [ ] Test: "Semantic tokens reference primitive values"
- [ ] Test: "Light theme overrides semantic tokens"
- [ ] Test: "Component tokens use semantic values"

#### Commit

- [ ] Committed: "feat(tokens): add consolidated design token system"

---

### Prompt 0.2 — Token Migration

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/app.css`
- [ ] `src/lib/components/Toolbar.svelte`
- [ ] `src/lib/components/Rack.svelte`
- [ ] `src/lib/components/RackDevice.svelte`
- [ ] `src/lib/components/DevicePalette.svelte`
- [ ] `src/lib/components/DevicePaletteItem.svelte`
- [ ] `src/lib/components/EditPanel.svelte`
- [ ] `src/lib/components/Drawer.svelte`
- [ ] `src/lib/components/Dialog.svelte`
- [ ] `src/lib/components/Toast.svelte`

#### Migration Tasks

- [ ] Import tokens in app.css: `@import './lib/styles/tokens.css';`
- [ ] Replace hardcoded colors with var(--colour-\*)
- [ ] Replace hardcoded spacing with var(--space-\*)
- [ ] Replace hardcoded font sizes with var(--font-size-\*)
- [ ] Replace hardcoded shadows with var(--shadow-\*)
- [ ] Replace hardcoded transitions with var(--duration-_) and var(--ease-_)

#### Verification

- [ ] Search for hex color patterns - none found
- [ ] Search for rgb/rgba patterns - none remaining
- [ ] Dark theme verified working
- [ ] Light theme verified working

#### Tests

- [ ] Test: "No hardcoded hex colors in app.css"
- [ ] Test: "Components render correctly with tokens"
- [ ] Test: "Theme switching still works"

#### Commit

- [ ] Committed: "refactor(styles): migrate all components to design tokens"

---

## Phase 1: Drag Affordance System

### Prompt 1.1 — Grip Icon Component

**Status:** ⬜ Pending

#### Files to Create

- [ ] `src/lib/components/icons/IconGrip.svelte` (new)

#### Implementation

- [ ] Size prop with default 16
- [ ] SVG with 6-dot pattern (2×3 grid)
- [ ] Circles at correct positions (cx=5/11, cy=3/8/13)
- [ ] fill="currentColor" applied
- [ ] aria-hidden="true" set

#### Export

- [ ] Added to `src/lib/components/icons/index.ts`

#### Tests

- [ ] Test: "IconGrip renders with default size 16"
- [ ] Test: "IconGrip renders with custom size"
- [ ] Test: "IconGrip has aria-hidden attribute"
- [ ] Test: "IconGrip contains 6 circles"

#### Commit

- [ ] Committed: "feat(icons): add grip icon for drag affordance"

---

### Prompt 1.2 — Device Palette Item Drag Affordance

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/lib/components/DevicePaletteItem.svelte`
- [ ] `src/app.css` (or component styles)

#### Implementation

- [ ] Import IconGrip component
- [ ] Add isDragging state
- [ ] Add drag-handle span with IconGrip
- [ ] Add category-indicator span
- [ ] Add device-name span
- [ ] Add device-height badge span
- [ ] Implement handleDragStart handler
- [ ] Implement handleDragEnd handler

#### CSS Styles

- [ ] .device-palette-item base styles
- [ ] .device-palette-item:hover state (lift, shadow)
- [ ] .device-palette-item:active state (scale, deeper shadow)
- [ ] .device-palette-item.dragging state
- [ ] .drag-handle opacity transition
- [ ] .category-indicator styles
- [ ] .device-height badge styles

#### Tests

- [ ] Test: "Device item displays grip handle icon"
- [ ] Test: "Cursor changes to grab on hover"
- [ ] Test: "Item lifts with shadow on hover"
- [ ] Test: "Item scales up when dragging"
- [ ] Test: "Grip handle becomes visible on hover"
- [ ] Test: "Category indicator shows device color"
- [ ] Test: "Height badge shows U count"

#### Commit

- [ ] Committed: "feat(dnd): add drag affordance to device palette items"

---

### Prompt 1.3 — Drop Zone Highlighting

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/lib/components/Rack.svelte`
- [ ] `src/app.css` (or component styles)

#### Implementation

- [ ] Add dragOverPosition state
- [ ] Add dragDeviceHeight state
- [ ] Add isDragValid state
- [ ] Implement handleDragOver handler
- [ ] Implement handleDragLeave handler
- [ ] Update handleDrop to clear state
- [ ] Add drop-target class binding to U slots
- [ ] Add drop-valid/drop-invalid class bindings
- [ ] Add ghost preview rectangle

#### CSS Styles

- [ ] .u-slot base styles with transition
- [ ] .u-slot:hover state
- [ ] .u-slot.drop-target.drop-valid state (blue)
- [ ] .u-slot.drop-target.drop-invalid state (red)
- [ ] .drop-preview ghost outline styles

#### Tests

- [ ] Test: "U slots have subtle visual distinction"
- [ ] Test: "Drag over highlights target slots in blue"
- [ ] Test: "Multi-U device highlights all affected slots"
- [ ] Test: "Invalid drop position shows red highlight"
- [ ] Test: "Invalid drop position shows no-drop cursor"
- [ ] Test: "Ghost preview shows landing position"
- [ ] Test: "Drop zone clears on drag leave"

#### Commit

- [ ] Committed: "feat(dnd): add drop zone visual feedback"

---

## Phase 2: Interaction States

### Prompt 2.1 — Toolbar Button States

**Status:** ⬜ Pending

#### Files to Create/Modify

- [ ] `src/lib/components/ToolbarButton.svelte` (create or update)
- [ ] `src/app.css` (or component styles)

#### Implementation

- [ ] Props: icon, label, disabled, active, tooltip
- [ ] Class bindings for active state
- [ ] aria-label attribute binding
- [ ] title attribute binding
- [ ] Click event forwarding

#### CSS States

- [ ] .toolbar-button base styles
- [ ] .toolbar-button:hover state
- [ ] .toolbar-button:focus-visible state (ring)
- [ ] .toolbar-button:active state (scale)
- [ ] .toolbar-button.active toggle state
- [ ] .toolbar-button:disabled state

#### Toolbar Update

- [ ] All toolbar buttons use ToolbarButton component

#### Tests

- [ ] Test: "Button renders in rest state"
- [ ] Test: "Button shows hover state on mouse enter"
- [ ] Test: "Button shows focus ring on keyboard focus"
- [ ] Test: "Button scales down on active/pressed"
- [ ] Test: "Button shows active toggle state when active=true"
- [ ] Test: "Button appears disabled when disabled=true"
- [ ] Test: "Disabled button is not clickable"
- [ ] Test: "Button has aria-label when tooltip provided"

#### Commit

- [ ] Committed: "feat(ui): add complete toolbar button interaction states"

---

### Prompt 2.2 — Form Input States

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/app.css`
- [ ] `src/lib/components/EditPanel.svelte`
- [ ] `src/lib/components/NewRackForm.svelte`
- [ ] `src/lib/components/AddDeviceForm.svelte`

#### CSS States

- [ ] .input-field base styles
- [ ] .input-field:hover state
- [ ] .input-field:focus state (ring)
- [ ] .input-field:invalid state
- [ ] .input-field.error class
- [ ] .input-field:disabled state
- [ ] .input-error message styles

#### Component Updates

- [ ] EditPanel inputs use .input-field class
- [ ] NewRackForm inputs use .input-field class
- [ ] AddDeviceForm inputs use .input-field class

#### Tests

- [ ] Test: "Input renders in rest state"
- [ ] Test: "Input shows hover state on mouse enter"
- [ ] Test: "Input shows focus ring on focus"
- [ ] Test: "Input shows error state when invalid"
- [ ] Test: "Input appears disabled when disabled"
- [ ] Test: "Error message displays below invalid input"

#### Commit

- [ ] Committed: "feat(ui): add complete form input interaction states"

---

### Prompt 2.3 — Selection State Indicators

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/lib/components/Rack.svelte`
- [ ] `src/lib/components/RackDevice.svelte`
- [ ] `src/lib/components/DevicePaletteItem.svelte`

#### Rack Selection

- [ ] Add .selected class binding to rack container
- [ ] Add CSS for selected rack outline
- [ ] Add CSS for selected rack header highlight

#### Device Selection

- [ ] Add .selected class binding to device
- [ ] Add CSS for selected device outline
- [ ] Add selection pulse animation

#### Library Selection

- [ ] Add .library-selected class for device palette items
- [ ] Add CSS for library selection state

#### Tests

- [ ] Test: "Selected rack shows blue outline"
- [ ] Test: "Selected rack header has highlight"
- [ ] Test: "Selected device shows prominent indicator"
- [ ] Test: "Selection pulse animation runs"
- [ ] Test: "Library device shows selection when active"

#### Commit

- [ ] Committed: "feat(ui): add clear selection state indicators"

---

## Phase 3: Tooltip System

### Prompt 3.1 — Tooltip Component

**Status:** ⬜ Pending

#### Files to Create

- [ ] `src/lib/components/Tooltip.svelte` (new)

#### Implementation

- [ ] Props: text, shortcut, position
- [ ] State: visible (boolean)
- [ ] Timeout for delayed show (500ms)
- [ ] show() function with timeout
- [ ] hide() function clearing timeout
- [ ] mouseenter/mouseleave handlers
- [ ] focus/blur handlers
- [ ] role="tooltip" attribute

#### CSS Styles

- [ ] .tooltip-wrapper styles
- [ ] .tooltip base styles
- [ ] .tooltip-bottom positioning
- [ ] .tooltip-top positioning
- [ ] .tooltip-left positioning
- [ ] .tooltip-right positioning
- [ ] .tooltip-text styles
- [ ] .tooltip-shortcut kbd styles
- [ ] tooltip-fade-in animation

#### Tests

- [ ] Test: "Tooltip hidden by default"
- [ ] Test: "Tooltip appears after 500ms hover"
- [ ] Test: "Tooltip shows text content"
- [ ] Test: "Tooltip shows keyboard shortcut when provided"
- [ ] Test: "Tooltip hides on mouse leave"
- [ ] Test: "Tooltip positions correctly for each position option"
- [ ] Test: "Tooltip has correct ARIA role"

#### Commit

- [ ] Committed: "feat(components): add Tooltip component"

---

### Prompt 3.2 — Toolbar Tooltips Integration

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/lib/components/Toolbar.svelte`

#### Tooltips to Add

- [ ] Device Library: "Device Library" shortcut="D"
- [ ] New Rack: "New Rack" shortcut="N"
- [ ] Save Layout: "Save Layout" shortcut="Ctrl+S"
- [ ] Export Image: "Export Image" shortcut="Ctrl+E"
- [ ] Load Layout: "Load Layout" shortcut="Ctrl+O"
- [ ] Delete Selected: "Delete Selected" shortcut="Del"
- [ ] Zoom Out: "Zoom Out" shortcut="-"
- [ ] Zoom In: "Zoom In" shortcut="+"
- [ ] Fit All: "Fit All Racks" shortcut="F"
- [ ] Theme Toggle: "Toggle Theme"
- [ ] Help: "Help & Shortcuts" shortcut="?"

#### CSS Styles

- [ ] .toolbar-divider styles
- [ ] .zoom-display styles

#### Tests

- [ ] Test: "Every toolbar button has a tooltip"
- [ ] Test: "Tooltips show correct text for each button"
- [ ] Test: "Tooltips show keyboard shortcuts where applicable"
- [ ] Test: "Tooltips have consistent styling"
- [ ] Test: "Toolbar has visual dividers between groups"

#### Commit

- [ ] Committed: "feat(toolbar): add tooltips to all toolbar buttons"

---

## Phase 4: Accessibility

### Prompt 4.1 — Focus Management Utilities

**Status:** ⬜ Pending

#### Files to Create

- [ ] `src/lib/utils/focus.ts` (new)

#### Implementation

- [ ] trapFocus Svelte action
- [ ] Focusable elements selector constant
- [ ] Tab key handling in trapFocus
- [ ] Shift+Tab wrap to last element
- [ ] Tab wrap to first element
- [ ] focusFirst utility function
- [ ] createFocusManager factory function
- [ ] save() method for focus manager
- [ ] restore() method for focus manager

#### Export

- [ ] Export from utils/index.ts

#### Tests

- [ ] Test: "trapFocus prevents focus from leaving container"
- [ ] Test: "Tab wraps from last to first element"
- [ ] Test: "Shift+Tab wraps from first to last element"
- [ ] Test: "focusFirst focuses first focusable element"
- [ ] Test: "Focus manager saves and restores focus"

#### Commit

- [ ] Committed: "feat(a11y): add focus management utilities"

---

### Prompt 4.2 — Dialog Accessibility

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/lib/components/Dialog.svelte`
- [ ] `src/app.css`

#### Implementation

- [ ] Import focus utilities
- [ ] Create focus manager instance
- [ ] Save focus on open
- [ ] Focus first element on open
- [ ] Restore focus on close
- [ ] Escape key handler
- [ ] use:trapFocus directive
- [ ] role="dialog" attribute
- [ ] aria-modal="true" attribute
- [ ] aria-labelledby attribute
- [ ] Backdrop click closes

#### Screen Reader Utilities

- [ ] Add .sr-only utility class

#### Tests

- [ ] Test: "Dialog has role='dialog'"
- [ ] Test: "Dialog has aria-modal='true'"
- [ ] Test: "Dialog has aria-labelledby pointing to title"
- [ ] Test: "Focus moves to dialog on open"
- [ ] Test: "Focus returns to trigger on close"
- [ ] Test: "Focus is trapped within dialog"
- [ ] Test: "Escape key closes dialog"
- [ ] Test: "Click outside closes dialog"

#### Commit

- [ ] Committed: "feat(a11y): update Dialog component with accessibility features"

---

### Prompt 4.3 — ARIA Labels Audit

**Status:** ⬜ Pending

#### Files to Audit

- [ ] `src/lib/components/Toolbar.svelte`
- [ ] `src/lib/components/EditPanel.svelte`
- [ ] `src/lib/components/Dialog.svelte`
- [ ] `src/lib/components/Drawer.svelte`
- [ ] `src/lib/components/Canvas.svelte`

#### Fixes Required

- [ ] All icon-only buttons have aria-label
- [ ] Drawer close button has aria-label
- [ ] All inputs have associated labels
- [ ] Search input has aria-label if no visible label
- [ ] SVG interactive elements have roles
- [ ] Rack groups have aria-label
- [ ] Device groups have aria-label

#### Documentation

- [ ] Create docs/a11y-checklist.md

#### Tests

- [ ] Test: "All toolbar buttons have aria-label"
- [ ] Test: "All form inputs have labels"
- [ ] Test: "All dialogs have aria-labelledby"
- [ ] Test: "All close buttons have aria-label"
- [ ] Test: "All interactive SVG elements have roles"

#### Commit

- [ ] Committed: "fix(a11y): audit and fix ARIA labels across components"

---

### Prompt 4.4 — Color Contrast Verification

**Status:** ⬜ Pending

#### Combinations to Test

- [ ] Body text (--colour-text on --colour-bg): 4.5:1
- [ ] Muted text (--colour-text-muted on --colour-bg): 4.5:1
- [ ] Button text (--colour-text on --colour-surface): 4.5:1
- [ ] Focus ring (--colour-focus-ring on --colour-bg): 3:1
- [ ] Error text (--colour-error on --colour-surface): 4.5:1
- [ ] Link text (--colour-selection on --colour-bg): 4.5:1
- [ ] Placeholder text (on --colour-surface): 4.5:1

#### Light Theme Tests

- [ ] All dark theme combinations verified for light theme

#### Fixes Applied

- [ ] Any failing combinations adjusted in tokens.css

#### Utility Classes

- [ ] .text-high-contrast added
- [ ] .text-medium-contrast added
- [ ] .text-low-contrast added

#### Tests

- [ ] Test: "Body text meets 4.5:1 contrast ratio"
- [ ] Test: "Muted text meets 4.5:1 contrast ratio"
- [ ] Test: "Error text meets 4.5:1 contrast ratio"
- [ ] Test: "Focus indicators meet 3:1 contrast ratio"
- [ ] Test: "Light theme colors meet contrast requirements"

#### Commit

- [ ] Committed: "fix(a11y): verify and fix color contrast for WCAG AA"

---

## Phase 5: Visual Polish

### Prompt 5.1 — Edit Panel Visual Hierarchy

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/lib/components/EditPanel.svelte`
- [ ] `src/app.css`

#### Implementation

- [ ] Add contextual title derived state
- [ ] Create Properties section
- [ ] Create Information section
- [ ] Create Danger Zone section
- [ ] Add height preset buttons
- [ ] Add capacity info display

#### CSS Styles

- [ ] .edit-panel-content styles
- [ ] .edit-section styles
- [ ] .edit-section-title styles
- [ ] .edit-section-danger styles
- [ ] .form-group styles
- [ ] .input-hint styles
- [ ] .height-input-group styles
- [ ] .preset-buttons grid styles
- [ ] .preset-button states
- [ ] .info-list styles
- [ ] .info-item styles
- [ ] .button-destructive styles

#### Tests

- [ ] Test: "Edit panel shows contextual title"
- [ ] Test: "Sections are visually separated"
- [ ] Test: "Preset buttons show active state"
- [ ] Test: "Delete button is in danger zone"
- [ ] Test: "Info section shows capacity stats"

#### Commit

- [ ] Committed: "feat(ui): improve Edit Panel visual hierarchy"

---

### Prompt 5.2 — Rack Visual Enhancements

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/lib/components/Rack.svelte`

#### Implementation

- [ ] Add alternating row shading
- [ ] Highlight every 5th U number
- [ ] Position rack title above rack
- [ ] Use tabular figures for U numbers

#### CSS Styles

- [ ] .u-slot-bg base styles
- [ ] .u-slot-bg.even alternating shade
- [ ] .u-number base styles
- [ ] .u-number.highlight styles
- [ ] .rack-title styles

#### Tests

- [ ] Test: "U slots have alternating shading"
- [ ] Test: "Every 5th U number is highlighted"
- [ ] Test: "Rack title is above the rack"
- [ ] Test: "U numbers use tabular figures"

#### Commit

- [ ] Committed: "feat(ui): enhance rack visual appearance"

---

## Phase 6: Animation System

### Prompt 6.1 — Animation Keyframes

**Status:** ⬜ Pending

#### Files to Modify

- [ ] `src/app.css`

#### Animations to Add

- [ ] @keyframes device-settle
- [ ] .device-just-dropped class
- [ ] @keyframes drawer-slide-in-left
- [ ] @keyframes drawer-slide-in-right
- [ ] .drawer-left class
- [ ] .drawer-right class
- [ ] @keyframes toast-slide-up
- [ ] .toast-enter class
- [ ] @keyframes dialog-fade-in
- [ ] @keyframes dialog-scale-in
- [ ] .dialog-backdrop animation
- [ ] .dialog animation
- [ ] @keyframes selection-pulse
- [ ] @keyframes shake
- [ ] .error-shake class

#### Tests

- [ ] Test: "Animation keyframes are defined"
- [ ] Test: "Animation classes apply correctly"
- [ ] Test: "Device settle animation plays on drop"

#### Commit

- [ ] Committed: "feat(animation): add consistent animation keyframes"

---

### Prompt 6.2 — Reduced Motion Support

**Status:** ⬜ Pending

#### Files to Create/Modify

- [ ] `src/lib/utils/motion.ts` (new)
- [ ] `src/app.css`
- [ ] Components using animations

#### Implementation

- [ ] prefersReducedMotion() utility function
- [ ] getAnimationDuration() utility function
- [ ] animate Svelte action

#### CSS

- [ ] @media (prefers-reduced-motion: reduce) rule
- [ ] animation-duration override
- [ ] transition-duration override

#### Component Updates

- [ ] Drawer respects motion preference
- [ ] Dialog respects motion preference
- [ ] Toast respects motion preference

#### Tests

- [ ] Test: "Animations disabled when prefers-reduced-motion"
- [ ] Test: "prefersReducedMotion returns boolean"
- [ ] Test: "getAnimationDuration returns 0 when reduced motion"
- [ ] Test: "CSS respects reduced motion media query"

#### Commit

- [ ] Committed: "feat(a11y): add prefers-reduced-motion support"

---

## Phase 7: Final Integration

### Prompt 7.1 — Visual Consistency Audit

**Status:** ⬜ Pending

#### Spacing Audit

- [ ] All padding uses --space-\* tokens
- [ ] All margins use --space-\* tokens
- [ ] All gaps use --space-\* tokens
- [ ] Consistent spacing between sections

#### Color Audit

- [ ] All colors use --colour-\* tokens
- [ ] No hardcoded hex values
- [ ] Consistent use of semantic colors
- [ ] Light theme verified
- [ ] Dark theme verified

#### Typography Audit

- [ ] All font sizes use --font-size-\* tokens
- [ ] All font weights use --font-weight-\* tokens
- [ ] Consistent heading hierarchy

#### Border/Shadow Audit

- [ ] All border radii use --radius-\* tokens
- [ ] All shadows use --shadow-\* tokens
- [ ] Consistent border colors

#### Animation Audit

- [ ] All transitions use --duration-\* tokens
- [ ] All easing uses --ease-\* tokens
- [ ] Reduced motion respected

#### Screenshots Captured

- [ ] Empty state
- [ ] Single rack
- [ ] Multiple racks
- [ ] Device library open
- [ ] Edit panel with rack selected
- [ ] Edit panel with device selected
- [ ] Dialog open
- [ ] Toast visible
- [ ] Light theme
- [ ] Dark theme

#### Tests

- [ ] Test: "All components use design tokens"
- [ ] Test: "No hardcoded colors in stylesheets"
- [ ] Test: "Theme switching applies to all components"
- [ ] Test: "Spacing is consistent (4px grid)"

#### Commit

- [ ] Committed: "fix(ui): audit and fix visual consistency"

---

### Prompt 7.2 — Final Testing and Documentation

**Status:** ⬜ Pending

#### Test Suite

- [ ] All unit tests pass
- [ ] All integration tests pass
- [ ] Lighthouse accessibility > 95

#### Success Criteria Verification

- [ ] Device library items display grip handle
- [ ] Cursor changes to grab/grabbing
- [ ] Items lift on hover with shadow
- [ ] Items scale on drag
- [ ] Drop zones highlight (blue valid, red invalid)
- [ ] Multi-U devices highlight all slots
- [ ] Ghost outline shows landing position
- [ ] Toolbar buttons have all states (rest, hover, focus, active, disabled)
- [ ] Inputs have all states (rest, hover, focus, invalid, disabled)
- [ ] Selected rack has blue outline
- [ ] Selected device has prominent indicator
- [ ] Focus states visible (WCAG 2.4.7)
- [ ] Every toolbar icon has tooltip
- [ ] Tooltips show shortcuts
- [ ] Edit panel shows "Edit: [Item Name]"
- [ ] U slots have alternating shading
- [ ] Every 5th U number highlighted
- [ ] Device settle animation works
- [ ] Drawer slide animation works
- [ ] Animations respect prefers-reduced-motion
- [ ] All buttons have aria-label
- [ ] Dialogs trap focus
- [ ] Color contrast meets WCAG AA
- [ ] Design tokens in single file
- [ ] No hardcoded colors

#### Documentation Updates

- [ ] CHANGELOG updated with v0.2.1 entry
- [ ] package.json version updated to 0.2.1

#### Code Cleanup

- [ ] console.log statements removed
- [ ] TODO comments resolved or documented
- [ ] No TypeScript errors
- [ ] No linting warnings

#### Commit

- [ ] Committed: "chore: v0.2.1 release preparation"

---

## Post-Implementation Checklist

- [ ] All prompts completed
- [ ] All tests passing
- [ ] Git history clean and logical
- [ ] No merge conflicts
- [ ] Performance unchanged or improved
- [ ] Lighthouse scores meet targets
- [ ] Ready for code review

---

## Notes

### Files Created This Version

```
src/lib/styles/tokens.css (new)
src/lib/components/icons/IconGrip.svelte (new)
src/lib/components/Tooltip.svelte (new)
src/lib/components/ToolbarButton.svelte (new or updated)
src/lib/utils/focus.ts (new)
src/lib/utils/motion.ts (new)
docs/a11y-checklist.md (new)
```

### Files Modified This Version

```
src/app.css
src/lib/components/Toolbar.svelte
src/lib/components/Rack.svelte
src/lib/components/RackDevice.svelte
src/lib/components/DevicePalette.svelte
src/lib/components/DevicePaletteItem.svelte
src/lib/components/EditPanel.svelte
src/lib/components/Drawer.svelte
src/lib/components/Dialog.svelte
src/lib/components/Toast.svelte
src/lib/components/Canvas.svelte
src/lib/components/NewRackForm.svelte
src/lib/components/AddDeviceForm.svelte
src/lib/components/icons/index.ts
src/lib/utils/index.ts
CHANGELOG.md
package.json
```

### Dependencies

- No new npm dependencies required

### Breaking Changes

- None (purely additive/visual changes)

---

_Generated: 2025-11-30_
_Implements: design-review-spec.md_
_Prompt Plan: v0.2.1-prompt_plan.md_
